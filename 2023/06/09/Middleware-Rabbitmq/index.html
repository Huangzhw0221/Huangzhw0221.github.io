<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Huang Zhiwei">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://huangzhw0221.github.io/2023/06/09/middleware-rabbitmq/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="RabbitMqæ¶ˆæ¯é˜Ÿåˆ—æœ¬èŠ‚å‚è€ƒè‡ªï¼šè¶…è¯¦ç»†çš„RabbitMQå…¥é—¨ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº (aliyun.com)   ğŸ‘‰ â€œæ¶ˆæ¯é˜Ÿåˆ—(Message Queue)â€çš„ä½œç”¨æ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿å­˜æ¶ˆæ¯çš„å®¹å™¨ï¼Œç”¨äºè§£è€¦å’Œå¼‚æ­¥å¤„ç†ã€‚   åœ¨ä»¥ä¸‹ä¸šåŠ¡åœºæ™¯ä¸‹å¯èƒ½éœ€è¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼š  ä»»åŠ¡å¼‚æ­¥å¤„ç†ï¼šå°†ä»»åŠ¡æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿååé‡å’Œå¤„ç†é€Ÿåº¦ã€‚ æµé‡å‰Šå³°ï¼šå°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—">
<meta property="og:type" content="article">
<meta property="og:title" content="ä¸­é—´ä»¶å­¦ä¹ --Rabbitmq æ¶ˆæ¯é˜Ÿåˆ—">
<meta property="og:url" content="https://huangzhw0221.github.io/2023/06/09/Middleware-Rabbitmq/index.html">
<meta property="og:site_name" content="Huang&#39;s Matrix">
<meta property="og:description" content="RabbitMqæ¶ˆæ¯é˜Ÿåˆ—æœ¬èŠ‚å‚è€ƒè‡ªï¼šè¶…è¯¦ç»†çš„RabbitMQå…¥é—¨ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº (aliyun.com)   ğŸ‘‰ â€œæ¶ˆæ¯é˜Ÿåˆ—(Message Queue)â€çš„ä½œç”¨æ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿å­˜æ¶ˆæ¯çš„å®¹å™¨ï¼Œç”¨äºè§£è€¦å’Œå¼‚æ­¥å¤„ç†ã€‚   åœ¨ä»¥ä¸‹ä¸šåŠ¡åœºæ™¯ä¸‹å¯èƒ½éœ€è¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼š  ä»»åŠ¡å¼‚æ­¥å¤„ç†ï¼šå°†ä»»åŠ¡æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿååé‡å’Œå¤„ç†é€Ÿåº¦ã€‚ æµé‡å‰Šå³°ï¼šå°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100112.png">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100310.png">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100426.png">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/Untitled-16874853294971.png">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-15033c8d6081f2b600802945620807a2_720w.webp">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100749.png">
<meta property="og:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100900.png">
<meta property="article:published_time" content="2023-06-09T01:53:23.000Z">
<meta property="article:modified_time" content="2023-09-02T15:06:15.718Z">
<meta property="article:author" content="Huang Zhiwei">
<meta property="article:tag" content="ä¸­é—´ä»¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100112.png">
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/redefine-favicon.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-favicon.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/redefine-favicon.svg">
    <!--- Page Info-->
    
    <title>
        
            ä¸­é—´ä»¶å­¦ä¹ --Rabbitmq æ¶ˆæ¯é˜Ÿåˆ— -
        
        Huang&#39;s Matrix
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"huangzhw0221.github.io","root":"/","language":"zh-CN"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[""]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"æ¨èé˜…è¯»","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true},"home_banner":{"enable":true,"image":{"light":"https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg","dark":"https://images.pexels.com/photos/461956/pexels-photo-461956.jpeg"},"title":"ç™½äº‘æ€¡æ„ æ¸…æ³‰æ´—å¿ƒ","subtitle":{"text":[],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.1.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Huang&#39;s Matrix
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        é¦–é¡µ
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                é¦–é¡µ
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">ä¸­é—´ä»¶å­¦ä¹ --Rabbitmq æ¶ˆæ¯é˜Ÿåˆ—</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/redefine-avatar.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Huang Zhiwei</span>
                            
                                <span class="author-label"></span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-06-09 09:53:23</span>
        <span class="mobile">2023-06-09 09:53</span>
        <span class="hover-info">åˆ›å»º</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-09-02 23:06:15</span>
            <span class="mobile">2023-09-02 23:06</span>
            <span class="hover-info">æ›´æ–°</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">ä¸­é—´ä»¶</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="RabbitMqæ¶ˆæ¯é˜Ÿåˆ—"><a href="#RabbitMqæ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="RabbitMqæ¶ˆæ¯é˜Ÿåˆ—"></a>RabbitMqæ¶ˆæ¯é˜Ÿåˆ—</h1><p>æœ¬èŠ‚å‚è€ƒè‡ªï¼š<a class="link"   target="_blank" rel="noopener" href="https://developer.aliyun.com/article/769883" >è¶…è¯¦ç»†çš„RabbitMQå…¥é—¨ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº (aliyun.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<aside>
ğŸ‘‰ â€œæ¶ˆæ¯é˜Ÿåˆ—(Message Queue)â€çš„ä½œç”¨æ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿å­˜æ¶ˆæ¯çš„å®¹å™¨ï¼Œç”¨äºè§£è€¦å’Œå¼‚æ­¥å¤„ç†ã€‚


<p>åœ¨ä»¥ä¸‹ä¸šåŠ¡åœºæ™¯ä¸‹å¯èƒ½éœ€è¦ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼š</p>
<ul>
<li>ä»»åŠ¡å¼‚æ­¥å¤„ç†ï¼šå°†ä»»åŠ¡æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†ä»»åŠ¡ï¼Œæé«˜ç³»ç»Ÿååé‡å’Œå¤„ç†é€Ÿåº¦ã€‚</li>
<li>æµé‡å‰Šå³°ï¼šå°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†è¯·æ±‚ï¼Œé¿å…é«˜å¹¶å‘æƒ…å†µä¸‹ç³»ç»Ÿå®•æœºã€‚</li>
<li>åº”ç”¨è§£è€¦ï¼šé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œåº”ç”¨é—´é€šä¿¡ï¼Œä½¿å¾—åº”ç”¨é—´è§£è€¦ï¼Œæé«˜ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
<li>æ—¥å¿—å¤„ç†ï¼šå°†æ—¥å¿—æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†æ—¥å¿—ï¼Œé¿å…æ—¥å¿—å¤„ç†é˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li>æ¶ˆæ¯å¹¿æ’­ï¼šå°†æ¶ˆæ¯æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯ï¼Œå®ç°æ¶ˆæ¯å¹¿æ’­çš„åŠŸèƒ½ã€‚</aside></li>
</ul>
<p><strong>â€œæ¶ˆæ¯é˜Ÿåˆ—(Message Queue)â€æ˜¯åœ¨æ¶ˆæ¯çš„ä¼ è¾“è¿‡ç¨‹ä¸­ä¿å­˜æ¶ˆæ¯çš„å®¹å™¨</strong>ã€‚åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œé€šå¸¸æœ‰ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸¤ä¸ªè§’è‰²ã€‚ç”Ÿäº§è€…åªè´Ÿè´£å‘é€æ•°æ®åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®å¤„ç†ï¼Œä»–ä¸ç®¡ã€‚æ¶ˆè´¹è€…åªè´Ÿè´£ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®å¤„ç†ï¼Œä»–ä¸ç®¡è¿™æ˜¯è°å‘é€çš„æ•°æ®ã€‚</p>
<h2 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h2><p><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€è¿›æ¥ï¼Œç³»ç»ŸAä¼šè°ƒç”¨ç³»ç»ŸBã€Cã€Dä¸‰ä¸ªç³»ç»Ÿï¼ŒåŒæ­¥è¯·æ±‚çš„è¯ï¼Œå“åº”æ—¶é—´å°±æ˜¯ç³»ç»ŸAã€Bã€Cã€Dçš„æ€»å’Œï¼Œä¹Ÿå°±æ˜¯800msã€‚<strong>å¦‚æœä½¿ç”¨MQï¼Œç³»ç»ŸAå‘é€æ•°æ®åˆ°MQï¼Œç„¶åå°±å¯ä»¥è¿”å›å“åº”ç»™å®¢æˆ·ç«¯ï¼Œä¸éœ€è¦å†ç­‰å¾…ç³»ç»ŸBã€Cã€Dçš„å“åº”ï¼Œå¯ä»¥å¤§å¤§åœ°æé«˜æ€§èƒ½</strong>ã€‚å¯¹äºä¸€äº›éå¿…è¦çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚å‘é€çŸ­ä¿¡ï¼Œå‘é€é‚®ä»¶ç­‰ç­‰ï¼Œå°±å¯ä»¥é‡‡ç”¨MQã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100112.png"
                      alt="å¼‚æ­¥å¤„ç†"
                ></p>
<p><strong>è§£è€¦ï¼š</strong>å¦‚å›¾æ‰€ç¤ºã€‚å‡è®¾æœ‰ç³»ç»ŸBã€Cã€Déƒ½éœ€è¦ç³»ç»ŸAçš„æ•°æ®ï¼Œäºæ˜¯ç³»ç»ŸAè°ƒç”¨ä¸‰ä¸ªæ–¹æ³•å‘é€æ•°æ®åˆ°Bã€Cã€Dã€‚è¿™æ—¶ï¼Œç³»ç»ŸDä¸éœ€è¦äº†ï¼Œé‚£å°±éœ€è¦åœ¨ç³»ç»ŸAæŠŠç›¸å…³çš„ä»£ç åˆ æ‰ã€‚å‡è®¾è¿™æ—¶æœ‰ä¸ªæ–°çš„ç³»ç»ŸEéœ€è¦æ•°æ®ï¼Œè¿™æ—¶ç³»ç»ŸAåˆè¦å¢åŠ è°ƒç”¨ç³»ç»ŸEçš„ä»£ç ã€‚ä¸ºäº†é™ä½è¿™ç§å¼ºè€¦åˆï¼Œå°±å¯ä»¥ä½¿ç”¨MQï¼Œ<strong>ç³»ç»ŸAåªéœ€è¦æŠŠæ•°æ®å‘é€åˆ°MQï¼Œå…¶ä»–ç³»ç»Ÿå¦‚æœéœ€è¦æ•°æ®ï¼Œåˆ™ä»MQä¸­è·å–å³å¯</strong>ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100310.png"
                      alt="è§£è€¦"
                ></p>
<p><strong>å‰Šå³°</strong>ï¼šè¿™æ˜¯MQä¸€ä¸ªå¾ˆé‡è¦çš„åº”ç”¨ã€‚å‡è®¾ç³»ç»ŸAåœ¨æŸä¸€æ®µæ—¶é—´è¯·æ±‚æ•°æš´å¢ï¼Œæœ‰5000ä¸ªè¯·æ±‚å‘é€è¿‡æ¥ï¼Œç³»ç»ŸAè¿™æ—¶å°±ä¼šå‘é€5000æ¡SQLè¿›å…¥MySQLè¿›è¡Œæ‰§è¡Œï¼ŒMySQLå¯¹äºå¦‚æ­¤åºå¤§çš„è¯·æ±‚å½“ç„¶å¤„ç†ä¸è¿‡æ¥ï¼ŒMySQLå°±ä¼šå´©æºƒï¼Œå¯¼è‡´ç³»ç»Ÿç˜«ç—ªã€‚<strong>å¦‚æœä½¿ç”¨MQï¼Œç³»ç»ŸAä¸å†æ˜¯ç›´æ¥å‘é€SQLåˆ°æ•°æ®åº“ï¼Œè€Œæ˜¯æŠŠæ•°æ®å‘é€åˆ°MQï¼ŒMQçŸ­æ—¶é—´ç§¯å‹æ•°æ®æ˜¯å¯ä»¥æ¥å—çš„ï¼Œç„¶åç”±æ¶ˆè´¹è€…æ¯æ¬¡æ‹‰å–2000æ¡è¿›è¡Œå¤„ç†ï¼Œé˜²æ­¢åœ¨è¯·æ±‚å³°å€¼æ—¶æœŸå¤§é‡çš„è¯·æ±‚ç›´æ¥å‘é€åˆ°MySQLå¯¼è‡´ç³»ç»Ÿå´©æºƒ</strong>ã€‚</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100426.png"
                      alt="æ•°æ®åº“å‰Šå³°"
                ></p>
<h2 id="RabbitMQçš„ç‰¹ç‚¹"><a href="#RabbitMQçš„ç‰¹ç‚¹" class="headerlink" title="RabbitMQçš„ç‰¹ç‚¹"></a>RabbitMQçš„ç‰¹ç‚¹</h2><ul>
<li>å¯é æ€§ã€‚æ”¯æŒæŒä¹…åŒ–ï¼Œä¼ è¾“ç¡®è®¤ï¼Œå‘å¸ƒç¡®è®¤ç­‰ä¿è¯äº†MQçš„å¯é æ€§ã€‚</li>
<li>çµæ´»çš„åˆ†å‘æ¶ˆæ¯ç­–ç•¥ã€‚è¿™åº”è¯¥æ˜¯RabbitMQçš„ä¸€å¤§ç‰¹ç‚¹ã€‚åœ¨æ¶ˆæ¯è¿›å…¥MQå‰ç”±Exchange(äº¤æ¢æœº)è¿›è¡Œè·¯ç”±æ¶ˆæ¯ã€‚åˆ†å‘æ¶ˆæ¯ç­–ç•¥æœ‰ï¼šç®€å•æ¨¡å¼ã€å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ã€å‘å¸ƒè®¢é˜…æ¨¡å¼ã€è·¯ç”±æ¨¡å¼ã€é€šé…ç¬¦æ¨¡å¼ã€‚</li>
<li>æ”¯æŒé›†ç¾¤ã€‚å¤šå°RabbitMQæœåŠ¡å™¨å¯ä»¥ç»„æˆä¸€ä¸ªé›†ç¾¤ï¼Œå½¢æˆä¸€ä¸ªé€»è¾‘Brokerã€‚</li>
<li>å¤šç§åè®®ã€‚RabbitMQæ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ¯”å¦‚ STOMPã€MQTT ç­‰ç­‰ã€‚</li>
<li>æ”¯æŒå¤šç§è¯­è¨€å®¢æˆ·ç«¯ã€‚RabbitMQå‡ ä¹æ”¯æŒæ‰€æœ‰å¸¸ç”¨ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€.NETã€Ruby ç­‰ç­‰ã€‚</li>
<li>å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚RabbitMQæä¾›äº†ä¸€ä¸ªæ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ç›‘æ§å’Œç®¡ç†æ¶ˆæ¯ Brokerã€‚</li>
<li>æ’ä»¶æœºåˆ¶ã€‚RabbitMQæä¾›äº†è®¸å¤šæ’ä»¶ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶è¿›è¡Œæ‰©å±•ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ’ä»¶ã€‚</li>
</ul>
<h1 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h1><h2 id="é˜¿é‡Œäº‘å®éªŒå®¤RocketMQ"><a href="#é˜¿é‡Œäº‘å®éªŒå®¤RocketMQ" class="headerlink" title="é˜¿é‡Œäº‘å®éªŒå®¤RocketMQ"></a>é˜¿é‡Œäº‘å®éªŒå®¤RocketMQ</h2><div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåˆ‡æ¢ç›®å½•è‡³rocketmq-<span class="number">4.9</span><span class="number">.3</span>/binä¸‹ã€‚</span><br><span class="line">cd /root/rocketmq-<span class="number">4.9</span><span class="number">.3</span>/bin</span><br><span class="line">å…¶ç›®å½•ä¸‹å·²æœ‰å¦‚ä¸‹æ–‡ä»¶ï¼š</span><br><span class="line">logs  rocketmq-<span class="number">4.9</span><span class="number">.3</span>  rocketmq-all-<span class="number">4.9</span><span class="number">.3</span>-bin-release.<span class="property">zip</span>  rocketmq-handson-apply  spring-mq-bus-demo</span><br><span class="line"><span class="number">2.</span> å¯åŠ¨æœåŠ¡å™¨ï¼Œå’ŒæŸ¥çœ‹æ—¥å¿—</span><br><span class="line">nohup sh mqnamesrv &amp;</span><br><span class="line">tail -f ~<span class="regexp">/logs/</span>rocketmqlogs/namesrv.<span class="property">log</span></span><br><span class="line">çœ‹åˆ°<span class="title class_">The</span> <span class="title class_">Name</span> <span class="title class_">Server</span> boot success. serializeType=<span class="title class_">JSON</span> è¡¨ç¤ºå¯åŠ¨æˆåŠŸ</span><br><span class="line"><span class="number">3.</span> å¯åŠ¨ç«¯å£æ˜ å°„</span><br><span class="line">nohup sh mqbroker -n <span class="attr">localhost</span>:<span class="number">9876</span> &amp;</span><br><span class="line">tail -f ~<span class="regexp">/logs/</span>rocketmqlogs/broker.<span class="property">log</span></span><br><span class="line"><span class="number">4.</span> æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºtopicã€‚</span><br><span class="line">cd /root/rocketmq-<span class="number">4.9</span><span class="number">.3</span>/bin</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t sendDataType</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t sendOperationType</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t syncSendOrderly</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t sendAndReceive</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t broadcastConsumer</span><br><span class="line">./mqadmin updateTopic -n <span class="attr">localhost</span>:<span class="number">9876</span> -b <span class="attr">localhost</span>:<span class="number">10911</span> -t transactionMessage</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å¯åŠ¨java</span><br><span class="line">cd /root/rocketmq-handson-apply</span><br><span class="line">mvn install -<span class="title class_">Dmaven</span>.<span class="property">test</span>.<span class="property">skip</span></span><br><span class="line"><span class="keyword">export</span> local=$RANDOM</span><br><span class="line">java -jar  rocketmq-spring/target/rocketmq-spring-<span class="number">1.0</span><span class="number">.0</span>.<span class="property">jar</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å‘é€å„ç§è¯·æ±‚ï¼Œå¦‚å‘é€å¯¹è±¡ã€æ¶ˆæ¯ã€é›†åˆï¼ŒåŒæ­¥å‘é€ã€å¼‚æ­¥å‘é€ã€rpcå‘é€ã€äº‹åŠ¡æ¶ˆæ¯ï¼š</span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/sendObject?id=1&amp;name=xiaoming&amp;action=go2&amp;ags=3&quot;</span></span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/sendMessage?id=2&amp;name=xiaoming&amp;action=des&amp;ags=3&quot;</span></span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/sendCollection?id=2&amp;name=xiaoming&amp;action=des&amp;ags=3&quot;</span></span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/syncSend?id=2&amp;name=xiaoming&amp;action=des&amp;ags=3&quot;</span></span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/asyncSend?id=2&amp;name=xiaoming&amp;action=des&amp;ags=3&quot;</span></span><br><span class="line">wget -q -O- <span class="string">&quot;http://127.0.0.1:28082/messageSend/sendAndReceive?id=2&amp;name=xiaoming&amp;action=des&amp;ags=3&quot;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="windows11å®‰è£…"><a href="#windows11å®‰è£…" class="headerlink" title="windows11å®‰è£…"></a>windows11å®‰è£…</h2><p>ä½¿ç”¨dockeræ‹‰å–é•œåƒï¼Œä¸€å¼€å§‹ä½¿ç”¨äº†latestç‰ˆæœ¬ï¼Œå¯åŠ¨managementæ’ä»¶ä¹Ÿä¸è¡Œï¼Œåæ¥æ¢æˆäº†æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œè‡ªå¸¦managementæ’ä»¶ï¼Œspringbootæ˜¯ä¸å†æŠ¥é”™äº†ï¼Œä½†æ˜¯æœ‰äº›é¡µé¢æ— æ³•è®¿é—®ã€‚</p>
<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull <span class="attr">rabbitmq</span>:<span class="number">3.9</span><span class="number">.29</span>-management</span><br><span class="line"><span class="comment">// æŒ‡å®šå¯åŠ¨çš„ç«¯å£å’Œç”¨æˆ·åå¯†ç </span></span><br><span class="line">docker run -dit --name rabbitmq3<span class="number">.9</span><span class="number">.29</span> -e <span class="variable constant_">RABBITMQ_DEFAULT_USER</span>=guest -e <span class="variable constant_">RABBITMQ_DEFAULT_PASS</span>=guest -p <span class="number">15672</span>:<span class="number">15672</span> -p <span class="number">5672</span>:<span class="number">5672</span> <span class="attr">rabbitmq</span>:<span class="number">3.9</span><span class="number">.29</span>-management</span><br></pre></td></tr></table></figure></div>

<p><code>rabbitmq:3.9.29-management</code>ç‰ˆæœ¬åœ¨è¿›å…¥Adminé¡µé¢æ—¶æŠ¥é”™ï¼Œæ­¤ç‰ˆæœ¬å‡ºç°çš„é—®é¢˜å¦‚ä¸‹ï¼Œå¤§æ„æ˜¯EJSå‡ºé—®é¢˜äº†ï¼š</p>
<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SyntaxError</span>: <span class="title class_">Unexpected</span> token <span class="string">&#x27;catch&#x27;</span> <span class="title class_">SyntaxError</span>: <span class="title class_">Unexpected</span> token <span class="string">&#x27;catch&#x27;</span> at <span class="variable constant_">EJS</span>.<span class="property">Compiler</span>.<span class="property">compile</span> (<span class="attr">http</span>:<span class="comment">//localhost:15672/js/ejs-1.0.min.js:1:6659) at new EJS (http://localhost:15672/js/ejs-1.0.min.js:1:1625) at format (http://localhost:15672/js/main.js:1164:20) at http://localhost:15672/js/main.js:486:24 at with_reqs (http://localhost:15672/js/main.js:1147:9) at http://localhost:15672/js/main.js:1143:17 at req.onreadystatechange (http://localhost:15672/js/main.js:1238:17)</span></span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/Untitled-16874853294971.png"
                      alt="å®‰è£…å¼‚å¸¸"
                ></p>
<p>åæ¢æˆ<code>rabbitmq:management</code> æŒ‰ç…§<a class="link"   target="_blank" rel="noopener" href="https://juejin.cn/post/7205473726539530297" >Windowsç‰ˆDockerå®‰è£…RabbitMq - æ˜é‡‘ (juejin.cn) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ä¸€æ­¥æ­¥é»è´´ï¼Œè¯¥ç‰ˆæœ¬å¯ä»¥è®¿é—®adminé¡µé¢ï¼Œä½†æ˜¯æ— æ³•è®¿é—®é˜Ÿåˆ—queueé¡µé¢ã€‚å¯ä»¥è‡ªè¡Œé€‰æ‹©ï¼Œadminé¡µé¢å…¶å®åªç®¡ç†ç”¨æˆ·ï¼Œè¿™ä¸ªç”¨æˆ·ç®¡ç†å¯ä»¥è¿›å…¥dockerå®¹å™¨æ¥é…ç½®ã€‚ç°å°†å¸¸ç”¨æŒ‡ä»¤è´´å‡ºï¼š</p>
<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it a6fd7b077c5f /bin/bash</span><br><span class="line"><span class="comment">// æŸ¥çœ‹å½“å‰ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line">rabbitmqctl list_users</span><br><span class="line"><span class="comment">// æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">user    tags</span><br><span class="line">admin   [administrator]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ç”¨æˆ·æŒ‡ä»¤å’Œé…ç½®virtual hostæŒ‡ä»¤</span></span><br><span class="line">rabbitmqctl  add_user  test   test</span><br><span class="line">rabbitmqctl  set_user_tags  test  administrator</span><br><span class="line">rabbitmqctl  add_vhost  /test</span><br><span class="line">rabbitmqctl  set_permissions  -p  /test  test <span class="string">&#x27;.*&#x27;</span> <span class="string">&#x27;.*&#x27;</span> <span class="string">&#x27;.*&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨é…ç½®è¿‡ç¨‹ä¸­ï¼Œä¸€å¼€å§‹ä»¥ä¸ºç«¯å£å·æ˜¯å¯åŠ¨æ—¶ç”¨åˆ°çš„15672ï¼Œç»“æœè¿æ¥è®¸ä¹…æ— æ³•è®¿é—®ï¼Œæœ‰å¦‚ä¸‹æŠ¥é”™ï¼Œéƒ½æ˜¯æœªè¿æ¥çš„é”™è¯¯ï¼Œåæ¥æŸ¥è¯¢åå‘ç°é…ç½®çš„ç«¯å£éœ€è¦æ˜¯5672ï¼š</p>
<div class="highlight-container" data-rel="Jsx"><figure class="iseeu highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Failed</span> to check/redeclare auto-<span class="keyword">delete</span> <span class="title function_">queue</span>(s).</span><br><span class="line">org.<span class="property">springframework</span>.<span class="property">amqp</span>.<span class="property">AmqpIOException</span>: java.<span class="property">io</span>.<span class="property">IOException</span></span><br><span class="line">java.<span class="property">net</span>.<span class="property">SocketException</span>: <span class="title class_">Socket</span> <span class="title class_">Closed</span></span><br></pre></td></tr></table></figure></div>

<h2 id="amqpåè®®"><a href="#amqpåè®®" class="headerlink" title="amqpåè®®"></a>amqpåè®®</h2><p>AMQPæ‰€è¦†ç›–çš„å†…å®¹åŒ…å«äº†<strong>ç½‘ç»œåè®®</strong>ä»¥åŠ<strong>æœåŠ¡ç«¯æœåŠ¡</strong></p>
<p>AMQPçš„å…¨ç§°ä¸ºï¼šAdvanced Message Queuing Protocolï¼ˆé«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰ï¼Œå‘å¸ƒè€…ï¼ˆPublisherï¼‰å‘å¸ƒæ¶ˆæ¯ï¼ˆMessageï¼‰ï¼Œç»ç”±äº¤æ¢æœºï¼ˆExchangeï¼‰ã€‚äº¤æ¢æœºæ ¹æ®è·¯ç”±è§„åˆ™å°†æ”¶åˆ°çš„æ¶ˆæ¯åˆ†å‘ç»™ä¸è¯¥äº¤æ¢æœºç»‘å®šçš„é˜Ÿåˆ—ï¼ˆQueueï¼‰ã€‚æœ€å AMQP ä»£ç†ä¼šå°†æ¶ˆæ¯æŠ•é€’ç»™è®¢é˜…äº†æ­¤é˜Ÿåˆ—çš„æ¶ˆè´¹è€…ï¼Œæˆ–è€…æ¶ˆè´¹è€…æŒ‰ç…§éœ€æ±‚è‡ªè¡Œè·å–ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-15033c8d6081f2b600802945620807a2_720w.webp" alt="https://pic3.zhimg.com/80/v2-15033c8d6081f2b600802945620807a2_720w.webp"></p>
<ul>
<li><strong>ä¸€å¥—è¢«ç§°ä½œâ€é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®æ¨¡å‹(AMQ Model)â€œçš„æ¶ˆæ¯èƒ½åŠ›å®šä¹‰</strong>ã€‚è¯¥æ¨¡å‹æ¶µç›–äº†BrokeræœåŠ¡ä¸­ç”¨äºè·¯ç”±å’Œå­˜å‚¨æ¶ˆæ¯çš„ç»„ä»¶ï¼Œä»¥åŠæŠŠè¿™äº›ç»„ä»¶è¿åœ¨ä¸€èµ·çš„è§„åˆ™ã€‚</li>
<li><strong>ä¸€ä¸ªç½‘ç»œå±‚åè®®AMQP</strong>ã€‚èƒ½å¤Ÿè®©å®¢æˆ·ç«¯ç¨‹åºä¸å®ç°äº†AMQ Modelçš„æœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ã€‚</li>
</ul>
<h3 id="æ·±å…¥ç†è§£"><a href="#æ·±å…¥ç†è§£" class="headerlink" title="æ·±å…¥ç†è§£"></a><strong>æ·±å…¥ç†è§£</strong></h3><p>1ã€å‘å¸ƒè€…ã€äº¤æ¢æœºã€é˜Ÿåˆ—ã€æ¶ˆè´¹è€…éƒ½å¯ä»¥æœ‰å¤šä¸ªã€‚åŒæ—¶å› ä¸º AMQP æ˜¯ä¸€ä¸ªç½‘ç»œåè®®ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¸­çš„å‘å¸ƒè€…ï¼Œæ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯ä»£ç† å¯ä»¥åˆ†åˆ«å­˜åœ¨äºä¸åŒçš„è®¾å¤‡ä¸Šã€‚</p>
<p>2ã€å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯æ—¶å¯ä»¥ç»™æ¶ˆæ¯æŒ‡å®šå„ç§æ¶ˆæ¯å±æ€§ï¼ˆMessage Meta-dataï¼‰ã€‚æœ‰äº›å±æ€§æœ‰å¯èƒ½ä¼šè¢«æ¶ˆæ¯ä»£ç†ï¼ˆBrokersï¼‰ä½¿ç”¨ï¼Œç„¶è€Œå…¶ä»–çš„å±æ€§åˆ™æ˜¯å®Œå…¨ä¸é€æ˜çš„ï¼Œå®ƒä»¬åªèƒ½è¢«æ¥æ”¶æ¶ˆæ¯çš„åº”ç”¨æ‰€ä½¿ç”¨ã€‚</p>
<p>3ã€ä»å®‰å…¨è§’åº¦è€ƒè™‘ï¼Œç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œåˆæˆ–æ˜¯æ¶ˆè´¹è€…åœ¨å¤„ç†æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­æ„å¤–æŒ‚æ‰ï¼Œè¿™æ ·æ²¡æœ‰å¤„ç†æˆåŠŸçš„æ¶ˆæ¯å°±ä¼šä¸¢å¤±ã€‚åŸºäºæ­¤åŸå› ï¼ŒAMQP æ¨¡å—åŒ…å«äº†ä¸€ä¸ªæ¶ˆæ¯ç¡®è®¤ï¼ˆMessage Acknowledgementsï¼‰æœºåˆ¶ï¼šå½“ä¸€ä¸ªæ¶ˆæ¯ä»é˜Ÿåˆ—ä¸­æŠ•é€’ç»™æ¶ˆè´¹è€…åï¼Œä¸ä¼šç«‹å³ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œç›´åˆ°å®ƒæ”¶åˆ°æ¥è‡ªæ¶ˆè´¹è€…çš„ç¡®è®¤å›æ‰§ï¼ˆAcknowledgementï¼‰åï¼Œæ‰å®Œå…¨ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</p>
<p>4ã€åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¾‹å¦‚å½“ä¸€ä¸ªæ¶ˆæ¯æ— æ³•è¢«æˆåŠŸè·¯ç”±æ—¶ï¼ˆæ— æ³•ä»äº¤æ¢æœºåˆ†å‘åˆ°é˜Ÿåˆ—ï¼‰ï¼Œæ¶ˆæ¯æˆ–è®¸ä¼šè¢«è¿”å›ç»™å‘å¸ƒè€…å¹¶è¢«ä¸¢å¼ƒã€‚æˆ–è€…ï¼Œå¦‚æœæ¶ˆæ¯ä»£ç†æ‰§è¡Œäº†å»¶æœŸæ“ä½œï¼Œæ¶ˆæ¯ä¼šè¢«æ”¾å…¥ä¸€ä¸ªæ‰€è°“çš„æ­»ä¿¡é˜Ÿåˆ—ä¸­ã€‚æ­¤æ—¶ï¼Œæ¶ˆæ¯å‘å¸ƒè€…å¯ä»¥é€‰æ‹©æŸäº›å‚æ•°æ¥å¤„ç†è¿™äº›ç‰¹æ®Šæƒ…å†µã€‚</p>
<h1 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h1><ul>
<li>Brokerï¼šæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡è¿›ç¨‹ã€‚æ­¤è¿›ç¨‹åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šExchangeå’ŒQueueã€‚</li>
<li>Exchangeï¼šæ¶ˆæ¯é˜Ÿåˆ—äº¤æ¢æœºã€‚<strong>æŒ‰ä¸€å®šçš„è§„åˆ™å°†æ¶ˆæ¯è·¯ç”±è½¬å‘åˆ°æŸä¸ªé˜Ÿåˆ—</strong>ã€‚</li>
<li>Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚</li>
<li>Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ã€‚ç”Ÿäº§æ–¹å®¢æˆ·ç«¯å°†æ¶ˆæ¯åŒäº¤æ¢æœºè·¯ç”±å‘é€åˆ°é˜Ÿåˆ—ä¸­ã€‚</li>
<li>Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ã€‚æ¶ˆè´¹é˜Ÿåˆ—ä¸­å­˜å‚¨çš„æ¶ˆæ¯ã€‚</li>
</ul>
<p>Exchangeäº¤æ¢æœºç±»å‹æœ‰å››ç§ï¼Œæ ¹æ®ä¸åŒçš„ç±»å‹å·¥ä½œçš„æ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚åœ¨HelloWordä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨äº†æ¯”è¾ƒç®€å•çš„<strong>Direct Exchange</strong>ï¼Œç¿»è¯‘å°±æ˜¯ç›´è¿äº¤æ¢æœºã€‚å…¶ä½™ä¸‰ç§åˆ†åˆ«æ˜¯ï¼š<strong>Fanout exchangeã€Topic exchangeã€Headers exchange</strong>ã€‚</p>
<ul>
<li><p>Direct Exchangeï¼Œè¦æ±‚è¯¥æ¶ˆæ¯ä¸ä¸€ä¸ªç‰¹å®šçš„è·¯ç”±é”®å®Œå…¨åŒ¹é…ï¼›</p>
</li>
<li><p>Fanout exchangeï¼Œè¿™ç§ç±»å‹çš„äº¤æ¢æœºéœ€è¦å°†é˜Ÿåˆ—ç»‘å®šåˆ°äº¤æ¢æœºä¸Šã€‚ä¸€ä¸ªå‘é€åˆ°äº¤æ¢æœºçš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥äº¤æ¢æœºç»‘å®šçš„æ‰€æœ‰é˜Ÿåˆ—ä¸Šã€‚å¾ˆåƒå­ç½‘å¹¿æ’­ï¼Œæ¯å°å­ç½‘å†…çš„ä¸»æœºéƒ½è·å¾—äº†ä¸€ä»½å¤åˆ¶çš„æ¶ˆæ¯ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯å‘å¸ƒè®¢é˜…ã€‚</p>
</li>
<li><p>Topic Exchangeï¼Œä¸»é¢˜äº¤æ¢æœºï¼Œå¦‚æœä»ç”¨æ³•ä¸Šé¢ç¿»è¯‘å¯èƒ½å«é€šé…ç¬¦äº¤æ¢æœºä¼šæ›´åŠ è´´åˆ‡ã€‚è¿™ç§äº¤æ¢æœºæ˜¯ä½¿ç”¨é€šé…ç¬¦å»åŒ¹é…ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚é€šé…ç¬¦æœ‰ä¸¤ç§ï¼šâ€<em>â€œ ã€ â€œ#â€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯é€šé…ç¬¦å‰é¢å¿…é¡»è¦åŠ ä¸Šâ€.â€ç¬¦å·ã€‚</em><em><code>*</code></em>*Â ç¬¦å·ï¼šæœ‰ä¸”åªåŒ¹é…ä¸€ä¸ªè¯ï¼Œ**<code>#</code>**Â ç¬¦å·ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ã€‚</p>
</li>
<li><p>Headers Exchangeï¼Œè¿™ç§äº¤æ¢æœºç”¨çš„ç›¸å¯¹æ²¡è¿™ä¹ˆå¤šã€‚å®ƒè·Ÿä¸Šé¢ä¸‰ç§æœ‰ç‚¹åŒºåˆ«ï¼Œå®ƒçš„è·¯ç”±ä¸æ˜¯ç”¨routingKeyè¿›è¡Œè·¯ç”±åŒ¹é…ï¼Œè€Œæ˜¯åœ¨åŒ¹é…è¯·æ±‚å¤´ä¸­æ‰€å¸¦çš„é”®å€¼è¿›è¡Œè·¯ç”±ã€‚åˆ›å»ºé˜Ÿåˆ—éœ€è¦è®¾ç½®ç»‘å®šçš„å¤´éƒ¨ä¿¡æ¯ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼š<strong>å…¨éƒ¨åŒ¹é…å’Œéƒ¨åˆ†åŒ¹é…</strong>ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œäº¤æ¢æœºä¼šæ ¹æ®ç”Ÿäº§è€…å‘é€è¿‡æ¥çš„å¤´éƒ¨ä¿¡æ¯æºå¸¦çš„é”®å€¼å»åŒ¹é…é˜Ÿåˆ—ç»‘å®šçš„é”®å€¼ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚</p>
<p> <img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100749.png"
                     
                ></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://hzw-blogimage.oss-cn-shanghai.aliyuncs.com/blogimages/20230623100900.png"
                     
                ></p>
</li>
</ul>
<h1 id="å¯åŠ¨å’Œå®éªŒ"><a href="#å¯åŠ¨å’Œå®éªŒ" class="headerlink" title="å¯åŠ¨å’Œå®éªŒ"></a>å¯åŠ¨å’Œå®éªŒ</h1><p>æœ¬èŠ‚è®°å½•å®éªŒè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å°å‘</p>
<p>åˆ›å»ºä¸€ä¸ªå…¬å…±çš„pomé…ç½®ï¼Œå³<code>RabbitMqDemo</code> ï¼Œè¯¥pomä½¿ç”¨springç‰ˆæœ¬ä¸º2.7.12ï¼Œæ·»åŠ amqpä¾èµ–</p>
<div class="highlight-container" data-rel="Xml"><figure class="iseeu highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">&lt;-- å­æ¨¡å—--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>Common<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>Consumer<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>Core<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>ç„¶ååˆ›å»ºä¸‰ä¸ªå­æ¨¡å—ï¼š<code>Common Consumer Core</code> ä¸‰ä¸ªå­æ¨¡å—å¼•ç”¨çˆ¶æ¨¡å—çš„ä¾èµ–å’Œcommonçš„é…ç½®ï¼š</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">	&lt;artifactId&gt;RabbitMqDemo&lt;/artifactId&gt;</span><br><span class="line">	&lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;</span><br><span class="line">	&lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;com.common&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;Common&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">	&lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></div>

<h2 id="commonæ¨¡å—"><a href="#commonæ¨¡å—" class="headerlink" title="commonæ¨¡å—"></a>commonæ¨¡å—</h2><p>Commonè´Ÿè´£é…ç½®æ–‡ä»¶ï¼Œ<code>RabbitMQConfig</code>æ˜¯mqçš„åç§°é…ç½®ï¼Œ<code>DirectRabbitConfig</code> æ˜¯è¿æ¥é…ç½®ã€‚</p>
<p><code>RabbitMQConfig</code> åŒ…å«é˜Ÿåˆ—ä¸»é¢˜åç§°ã€å››ç§Exchangeäº¤æ¢æœºçš„åç§°å’Œé…ç½®ï¼š</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„é˜Ÿåˆ—ä¸»é¢˜åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RABBITMQ_DEMO_TOPIC</span> <span class="operator">=</span> <span class="string">&quot;rabbitmq.demo.topic&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„DIRECTäº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RABBITMQ_DEMO_DIRECT_EXCHANGE</span> <span class="operator">=</span> <span class="string">&quot;rabbipwetmq.demo.direct.exchange&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„DIRECTäº¤æ¢æœºå’Œé˜Ÿåˆ—ç»‘å®šçš„åŒ¹é…é”® DirectRouting</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">RABBITMQ_DEMO_DIRECT_ROUTING</span> <span class="operator">=</span> <span class="string">&quot;rabbitmq.demo.direct.routing&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„FANOUT_EXCHANGäº¤æ¢æœºç±»å‹çš„é˜Ÿåˆ— A çš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FANOUT_EXCHANGE_QUEUE_TOPIC_A</span> <span class="operator">=</span> <span class="string">&quot;fanout.A&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„FANOUT_EXCHANGäº¤æ¢æœºç±»å‹çš„é˜Ÿåˆ— B çš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FANOUT_EXCHANGE_QUEUE_TOPIC_B</span> <span class="operator">=</span> <span class="string">&quot;fanout.B&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„FANOUT_EXCHANGäº¤æ¢æœºç±»å‹çš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FANOUT_EXCHANGE_DEMO_NAME</span> <span class="operator">=</span> <span class="string">&quot;fanout.exchange.demo.name&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„TOPIC_EXCHANGEäº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOPIC_EXCHANGE_DEMO_NAME</span> <span class="operator">=</span> <span class="string">&quot;topic.exchange.demo.name&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„TOPIC_EXCHANGEäº¤æ¢æœºçš„é˜Ÿåˆ—Açš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOPIC_EXCHANGE_QUEUE_A</span> <span class="operator">=</span> <span class="string">&quot;topic.queue.a&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„TOPIC_EXCHANGEäº¤æ¢æœºçš„é˜Ÿåˆ—Bçš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOPIC_EXCHANGE_QUEUE_B</span> <span class="operator">=</span> <span class="string">&quot;topic.queue.b&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„TOPIC_EXCHANGEäº¤æ¢æœºçš„é˜Ÿåˆ—Cçš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOPIC_EXCHANGE_QUEUE_C</span> <span class="operator">=</span> <span class="string">&quot;topic.queue.c&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * HEADERS_EXCHANGEäº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">HEADERS_EXCHANGE_DEMO_NAME</span> <span class="operator">=</span> <span class="string">&quot;headers.exchange.demo.name&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„HEADERS_EXCHANGEäº¤æ¢æœºçš„é˜Ÿåˆ—Açš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">HEADERS_EXCHANGE_QUEUE_A</span> <span class="operator">=</span> <span class="string">&quot;headers.queue.a&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * RabbitMQçš„HEADERS_EXCHANGEäº¤æ¢æœºçš„é˜Ÿåˆ—Bçš„åç§°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">HEADERS_EXCHANGE_QUEUE_B</span> <span class="operator">=</span> <span class="string">&quot;headers.queue.b&quot;</span>;</span><br></pre></td></tr></table></figure></div>

<p><code>DirectRabbitConfig</code> é…ç½®è¿æ¥ã€æ¶ˆæ¯é˜Ÿåˆ—ã€é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šï¼š</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DirectRabbitConfig</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Resource</span></span><br><span class="line"><span class="comment">//    private RabbitAdmin rabbitAdmin;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RabbitAdmin <span class="title function_">rabbitAdmin</span><span class="params">(ConnectionFactory connectionFactory)</span> &#123;</span><br><span class="line">        <span class="type">RabbitAdmin</span> <span class="variable">rabbitAdmin</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RabbitAdmin</span>(connectionFactory);</span><br><span class="line">        <span class="comment">// åªæœ‰è®¾ç½®ä¸º trueï¼Œspring æ‰ä¼šåŠ è½½ RabbitAdmin è¿™ä¸ªç±»</span></span><br><span class="line">        rabbitAdmin.setAutoStartup(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> rabbitAdmin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">rabbitmqDemoDirectQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ï¼šé˜Ÿåˆ—ä¸»é¢˜åç§° ç¬¬äºŒä¸ªå‚æ•°ï¼šæ˜¯å¦æŒä¹…åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.RABBITMQ_DEMO_TOPIC, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">rabbitmqDemoDirectExchange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//Directäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(RabbitMQConfig.RABBITMQ_DEMO_DIRECT_EXCHANGE, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutExchangeQueueA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—A</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.FANOUT_EXCHANGE_QUEUE_TOPIC_A, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutExchangeQueueB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—B</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.FANOUT_EXCHANGE_QUEUE_TOPIC_B, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FanoutExchange <span class="title function_">rabbitmqDemoFanoutExchange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºFanoutExchangeç±»å‹äº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(RabbitMQConfig.FANOUT_EXCHANGE_DEMO_NAME, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindFanoutA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—Aç»‘å®šåˆ°FanoutExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutExchangeQueueA()).to(rabbitmqDemoFanoutExchange());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindFanoutB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—Bç»‘å®šåˆ°FanoutExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutExchangeQueueB()).to(rabbitmqDemoFanoutExchange());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindDirect</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é“¾å¼å†™æ³•ï¼Œç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼Œå¹¶è®¾ç½®åŒ¹é…é”®</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder</span><br><span class="line">                <span class="comment">//ç»‘å®šé˜Ÿåˆ—</span></span><br><span class="line">                .bind(rabbitmqDemoDirectQueue())</span><br><span class="line">                <span class="comment">//åˆ°äº¤æ¢æœº</span></span><br><span class="line">                .to(rabbitmqDemoDirectExchange())</span><br><span class="line">                <span class="comment">//å¹¶è®¾ç½®åŒ¹é…é”®</span></span><br><span class="line">                .with(RabbitMQConfig.RABBITMQ_DEMO_DIRECT_ROUTING);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TopicExchange <span class="title function_">rabbitmqDemoTopicExchange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é…ç½®TopicExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TopicExchange</span>(RabbitMQConfig.TOPIC_EXCHANGE_DEMO_NAME, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">topicExchangeQueueA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé˜Ÿåˆ—1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.TOPIC_EXCHANGE_QUEUE_A, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">topicExchangeQueueB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé˜Ÿåˆ—2</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.TOPIC_EXCHANGE_QUEUE_B, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">topicExchangeQueueC</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºé˜Ÿåˆ—3</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.TOPIC_EXCHANGE_QUEUE_C, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindTopicA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—Aç»‘å®šåˆ°FanoutExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(topicExchangeQueueB())</span><br><span class="line">                .to(rabbitmqDemoTopicExchange())</span><br><span class="line">                .with(<span class="string">&quot;a.*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindTopicB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—Aç»‘å®šåˆ°FanoutExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(topicExchangeQueueC())</span><br><span class="line">                .to(rabbitmqDemoTopicExchange())</span><br><span class="line">                .with(<span class="string">&quot;a.*&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindTopicC</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é˜Ÿåˆ—Aç»‘å®šåˆ°FanoutExchangeäº¤æ¢æœº</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(topicExchangeQueueA())</span><br><span class="line">                .to(rabbitmqDemoTopicExchange())</span><br><span class="line">                .with(<span class="string">&quot;rabbit.#&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">headersQueueA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.HEADERS_EXCHANGE_QUEUE_A, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">headersQueueB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(RabbitMQConfig.HEADERS_EXCHANGE_QUEUE_B, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HeadersExchange <span class="title function_">rabbitmqDemoHeadersExchange</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HeadersExchange</span>(RabbitMQConfig.HEADERS_EXCHANGE_DEMO_NAME, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindHeadersA</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;key_one&quot;</span>, <span class="string">&quot;java&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;key_two&quot;</span>, <span class="string">&quot;rabbit&quot;</span>);</span><br><span class="line">        <span class="comment">//å…¨åŒ¹é…</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(headersQueueA())</span><br><span class="line">                .to(rabbitmqDemoHeadersExchange())</span><br><span class="line">                .whereAll(map).match();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindHeadersB</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;headers_A&quot;</span>, <span class="string">&quot;coke&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;headers_B&quot;</span>, <span class="string">&quot;sky&quot;</span>);</span><br><span class="line">        <span class="comment">//éƒ¨åˆ†åŒ¹é…</span></span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(headersQueueB())</span><br><span class="line">                .to(rabbitmqDemoHeadersExchange())</span><br><span class="line">                .whereAny(map).match();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    @Override</span></span><br><span class="line"><span class="comment">//    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException &#123;</span></span><br><span class="line"><span class="comment">//        rabbitAdmin.declareExchange(rabbitmqDemoDirectExchange());</span></span><br><span class="line"><span class="comment">//        rabbitAdmin.declareQueue(rabbitmqDemoDirectQueue());</span></span><br><span class="line"><span class="comment">//        return null;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>å’Œæ•™ç¨‹ä¸­çš„ä¸åŒï¼Œåœ¨æ“ä½œæ—¶æŠ¥é”™å‡ºç°å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œä¸ä½¿ç”¨<code>rabbitAdmin</code> ä¹Ÿæ²¡äº‹ã€‚</p>
<h2 id="Coreæ¨¡å—"><a href="#Coreæ¨¡å—" class="headerlink" title="Coreæ¨¡å—"></a>Coreæ¨¡å—</h2><p>Coreæ¨¡å—å‘æ¶ˆæ¯é˜Ÿåˆ—å†™å…¥ï¼Œç”¨è‹¥å¹²ä¸ªä¸åŒçš„controlleræ§åˆ¶å‘ä¸åŒçš„queueå†™å…¥ã€‚åŒ…å«controllerã€serviceï¼ˆimplï¼‰ï¼Œä¸‹é¢ä»Implæ¥çœ‹å››ç§äº¤æ¢æœºæ–¹å¼ã€‚</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">sendMsg</span><span class="params">(String msg)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">String <span class="title function_">sendMsgByFanoutExchange</span><span class="params">(String msg)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">String <span class="title function_">sendMsgByTopicExchange</span><span class="params">(String msg, String routingKey)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">String <span class="title function_">sendMsgByHeadersExchange</span><span class="params">(String msg, Map&lt;String, Object&gt; map)</span> <span class="keyword">throws</span> Exception;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›´è¿</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendMsg</span><span class="params">(String msg)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">msgId</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>).substring(<span class="number">0</span>, <span class="number">32</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">sendTime</span> <span class="operator">=</span> sdf.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">            Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;msgId&quot;</span>, msgId);</span><br><span class="line">            map.put(<span class="string">&quot;sendTime&quot;</span>, sendTime);</span><br><span class="line">            map.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">            rabbitTemplate.convertAndSend(RabbitMQConfig.RABBITMQ_DEMO_DIRECT_EXCHANGE, RabbitMQConfig.RABBITMQ_DEMO_DIRECT_ROUTING, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Fanoutå‘å¸ƒï¼Œç»™åˆ°fanoutäº¤æ¢æœºï¼Œäº¤æ¢æœºå‘å¸ƒåˆ°ä¸ä¹‹ç»‘å®šçš„fanoutqueueAå’ŒfanoutqueueBä¸Š</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendMsgByFanoutExchange</span><span class="params">(String msg)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Map&lt;String, Object&gt; message = getMessage(msg);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rabbitTemplate.convertAndSend(RabbitMQConfig.FANOUT_EXCHANGE_DEMO_NAME, <span class="string">&quot;&quot;</span>, message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//topicå‘å¸ƒï¼Œå‚è€ƒconfigä¸­çš„é˜Ÿåˆ—å’Œäº¤æ¢æœºé…ç½®ï¼Œçœ‹åˆ°Aé˜Ÿåˆ—å’ŒBé˜Ÿåˆ—éƒ½æ˜¯ç»‘å®šåˆ°&quot;a.*&quot;çš„ï¼ŒCé˜Ÿåˆ—ç»‘å®šåˆ°&quot;rabbit.#&quot;</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendMsgByTopicExchange</span><span class="params">(String msg, String routingKey)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Map&lt;String, Object&gt; message = getMessage(msg);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line">            rabbitTemplate.convertAndSend(RabbitMQConfig.TOPIC_EXCHANGE_DEMO_NAME, routingKey, message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//headerså‘å¸ƒï¼Œå‚è€ƒconfigä¸­çš„é˜Ÿåˆ—å’Œäº¤æ¢æœºé…ç½®ï¼Œ.whereAll(map).match()å’ŒwhereAny(map).match()çš„ç»‘å®šåŒºåˆ«</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendMsgByHeadersExchange</span><span class="params">(String msg, Map&lt;String, Object&gt; map)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">MessageProperties</span> <span class="variable">messageProperties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MessageProperties</span>();</span><br><span class="line">            <span class="comment">//æ¶ˆæ¯æŒä¹…åŒ–</span></span><br><span class="line">            messageProperties.setDeliveryMode(MessageDeliveryMode.PERSISTENT);</span><br><span class="line">            messageProperties.setContentType(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            <span class="comment">//æ·»åŠ æ¶ˆæ¯</span></span><br><span class="line">            messageProperties.getHeaders().putAll(map);</span><br><span class="line">            <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(msg.getBytes(), messageProperties);</span><br><span class="line">            rabbitTemplate.convertAndSend(RabbitMQConfig.HEADERS_EXCHANGE_DEMO_NAME, <span class="literal">null</span>, message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Consumeræ¨¡å—"><a href="#Consumeræ¨¡å—" class="headerlink" title="Consumeræ¨¡å—"></a>Consumeræ¨¡å—</h2><p>æ¶ˆè´¹è€…æ¨¡å—ç”¨æ¥è·å–å¯¹åº”ç›‘å¬é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="meta">@RabbitListener</span>æ³¨è§£å£°æ˜ç›‘å¬çš„é˜Ÿåˆ—</span><br><span class="line"><span class="number">2.</span><span class="meta">@RabbitListener(queuesToDeclare  = @Queue(RabbitMQConfig.RABBITMQ_DEMO_TOPIC))</span></span><br><span class="line">	å…¶ä¸­queuesToDeclare  è¡¨ç¤ºå¦‚æœæ²¡æœ‰è¿™ä¸ªé˜Ÿåˆ—åˆ™åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜²æ­¢æŠ¥é”™ï¼›</span><br></pre></td></tr></table></figure></div>

<p>å¯åŠ¨åå¯ä»¥çœ‹åˆ°å„æ¡çº¿è·¯çš„ç›‘å¬æ¶ˆæ¯ï¼š</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é˜Ÿåˆ—Aæ”¶åˆ°æ¶ˆæ¯ï¼š&#123;msg=å¹¿æ’­å‘å¸ƒ,UUID, msgId=1fe4602e0c054b878f9d21f8fbf25840, sendTime=<span class="number">2023</span>-<span class="number">06</span>-09 <span class="number">13</span>:09:<span class="number">39</span>&#125;</span><br><span class="line">é˜Ÿåˆ—Bæ”¶åˆ°æ¶ˆæ¯ï¼š&#123;msg=å¹¿æ’­å‘å¸ƒ,UUID, msgId=1fe4602e0c054b878f9d21f8fbf25840, sendTime=<span class="number">2023</span>-<span class="number">06</span>-09 <span class="number">13</span>:09:<span class="number">39</span>&#125;</span><br><span class="line">é˜Ÿåˆ—[headers.queue.a]æ”¶åˆ°æ¶ˆæ¯ï¼šUUID</span><br><span class="line">é˜Ÿåˆ—[headers.queue.b]æ”¶åˆ°æ¶ˆæ¯ï¼šUUID</span><br><span class="line">æ¶ˆè´¹è€…RabbitMQDemoä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¶ˆè´¹ä¿¡æ¯ï¼š &#123;msg=ç›´è¿å†™å…¥,UUID, msgId=b58befd9034c495290540640abd8c0a4, sendTime=<span class="number">2023</span>-<span class="number">06</span>-09 <span class="number">13</span>:<span class="number">04</span>:<span class="number">03</span>&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="æ­»ä¿¡é˜Ÿåˆ—"><a href="#æ­»ä¿¡é˜Ÿåˆ—" class="headerlink" title="æ­»ä¿¡é˜Ÿåˆ—"></a>æ­»ä¿¡é˜Ÿåˆ—</h1><p>æœ¬èŠ‚å‚è€ƒè‡ª<a class="link"   target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/366053936" >RabbitMQ - æ­»ä¿¡é˜Ÿåˆ—(Dead-Letter-Exchange ) - çŸ¥ä¹ (zhihu.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>DLXï¼Œå…¨ç§°ä¸ºDead-Letter-Exchange , å¯ä»¥ç§°ä¹‹ä¸ºæ­»ä¿¡äº¤æ¢æœºï¼Œä¹Ÿæœ‰äººç§°ä¹‹ä¸ºæ­»ä¿¡é‚®ç®±ã€‚å½“æ¶ˆæ¯åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­å˜æˆæ­»ä¿¡(dead message)ä¹‹åï¼Œå®ƒèƒ½è¢«é‡æ–°å‘é€åˆ°å¦ä¸€ä¸ªäº¤æ¢æœºä¸­ï¼Œè¿™ä¸ªäº¤æ¢æœºå°±æ˜¯DLX ï¼Œç»‘å®šDLXçš„é˜Ÿåˆ—å°±ç§°ä¹‹ä¸ºæ­»ä¿¡é˜Ÿåˆ—ã€‚</p>
<p><strong>æ¶ˆæ¯å˜æˆæ­»ä¿¡ï¼Œå¯èƒ½æ˜¯ç”±äºä»¥ä¸‹çš„åŸå› ï¼š</strong></p>
<ul>
<li>æ¶ˆæ¯è¢«æ‹’ç»</li>
<li>æ¶ˆæ¯è¿‡æœŸ</li>
<li>é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦</li>
</ul>
<p>DLXä¹Ÿæ˜¯ä¸€ä¸ªæ­£å¸¸çš„äº¤æ¢æœºï¼Œå’Œä¸€èˆ¬çš„äº¤æ¢æœºæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒèƒ½åœ¨ä»»ä½•çš„é˜Ÿåˆ—ä¸Šè¢«æŒ‡å®šï¼Œå®é™…ä¸Šå°±æ˜¯è®¾ç½®æŸä¸€ä¸ªé˜Ÿåˆ—çš„å±æ€§ã€‚å½“è¿™ä¸ªé˜Ÿåˆ—ä¸­å­˜åœ¨æ­»ä¿¡æ—¶ï¼ŒRabbitmqå°±ä¼šè‡ªåŠ¨åœ°å°†è¿™ä¸ªæ¶ˆæ¯é‡æ–°å‘å¸ƒåˆ°è®¾ç½®çš„DLXä¸Šå»ï¼Œè¿›è€Œè¢«è·¯ç”±åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå³æ­»ä¿¡é˜Ÿåˆ—ã€‚</p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®æ­»ä¿¡é˜Ÿåˆ—</span></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">ttlDirectQueue</span><span class="params">()</span>&#123;</span><br><span class="line">        HashMap&lt;String,Object&gt; args = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//æ¶ˆæ¯è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        args.put(<span class="string">&quot;x-message-ttl&quot;</span>,<span class="number">5000</span>);</span><br><span class="line">        <span class="comment">//æ¶ˆæ¯é˜Ÿåˆ—æœ€å¤§é•¿åº¦ã€</span></span><br><span class="line">        args.put(<span class="string">&quot;x-max-length&quot;</span>,<span class="number">8</span>);</span><br><span class="line">        <span class="comment">//ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line">        args.put(<span class="string">&quot;x-dead-letter-exchange&quot;</span>,<span class="string">&quot;dead_direct_exchange&quot;</span>);</span><br><span class="line">        <span class="comment">//æ­»ä¿¡é˜Ÿåˆ—è·¯ç”±</span></span><br><span class="line">        args.put(<span class="string">&quot;x-dead-letter-routing-key&quot;</span>,<span class="string">&quot;dead&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">&quot;ttl.direct.queue&quot;</span>,<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,args);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>æ ‡é¢˜:</strong> ä¸­é—´ä»¶å­¦ä¹ --Rabbitmq æ¶ˆæ¯é˜Ÿåˆ—</li>
        <li><strong>ä½œè€…:</strong> Huang Zhiwei</li>
        <li><strong>åˆ›å»ºäº:</strong> 2023-06-09 09:53:23</li>
        
            <li>
                <strong>æ›´æ–°äº:</strong> 2023-09-02 23:06:15
            </li>
        
        <li>
            <strong>é“¾æ¥:</strong> https://huangzhw0221.github.io/2023/06/09/Middleware-Rabbitmq/
        </li>
        <li>
            <strong>ç‰ˆæƒå£°æ˜:</strong> æœ¬æ–‡ç« é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> è¿›è¡Œè®¸å¯ã€‚
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">#ä¸­é—´ä»¶</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/05/03/Paper-MAE/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">è®ºæ–‡é˜…è¯»--MAE</span>
                                    <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;è¯„è®º
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">æ­¤é¡µç›®å½•</div>
        <div class="page-title">ä¸­é—´ä»¶å­¦ä¹ --Rabbitmq æ¶ˆæ¯é˜Ÿåˆ—</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#RabbitMq%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="nav-text">RabbitMqæ¶ˆæ¯é˜Ÿåˆ—</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="nav-text">ä¸»è¦åŠŸèƒ½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RabbitMQ%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-text">RabbitMQçš„ç‰¹ç‚¹</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%A5%E9%97%A8"><span class="nav-text">å…¥é—¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%9E%E9%AA%8C%E5%AE%A4RocketMQ"><span class="nav-text">é˜¿é‡Œäº‘å®éªŒå®¤RocketMQ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#windows11%E5%AE%89%E8%A3%85"><span class="nav-text">windows11å®‰è£…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#amqp%E5%8D%8F%E8%AE%AE"><span class="nav-text">amqpåè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3"><span class="nav-text">æ·±å…¥ç†è§£</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E6%88%90"><span class="nav-text">ç»„æˆ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%AE%9E%E9%AA%8C"><span class="nav-text">å¯åŠ¨å’Œå®éªŒ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#common%E6%A8%A1%E5%9D%97"><span class="nav-text">commonæ¨¡å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Core%E6%A8%A1%E5%9D%97"><span class="nav-text">Coreæ¨¡å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Consumer%E6%A8%A1%E5%9D%97"><span class="nav-text">Consumeræ¨¡å—</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97"><span class="nav-text">æ­»ä¿¡é˜Ÿåˆ—</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Huang Zhiwei</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">ç”± <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="åœ–å±¤_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨</span>
                <br>
            <span class="theme-version-container">ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2022/8/17 11:45:14
            </div>
            <div>
                åšå®¢å·²è¿è¡Œ <span class="odometer" id="runtime_days" ></span> å¤© <span class="odometer" id="runtime_hours"></span> å°æ—¶ <span class="odometer" id="runtime_minutes"></span> åˆ†é’Ÿ <span class="odometer" id="runtime_seconds"></span> ç§’
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>





    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>







<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
